<source>
  @type systemd
  path /run/log/journal
  pos_file journal.pos
  filters [{ "_SYSTEMD_UNIT": "docker.service" }]
  tag journal
  read_from_head false
  <entry>
  field_map {"MESSAGE": "log", "_HOSTNAME": "Node"}
  fields_strip_underscores true
  fields_lowercase true
  </entry>
</source>

# probably want to use something like fluent-plugin-rewrite-tag-filter to
# retag entries from k8s
#<match journal>
#  @type rewrite_tag_filter
#  <rule>
#    key system-log
#    pattern ^k8s_\(\)\
#    tag kubernetes
#  </rule>
#</match>
#
<filter kubernetes.**>
  type kubernetes_metadata
  use_journal true
</filter>

<match **>
  @type elasticsearch
  host elasticsearch_host
  port 9200
  index_name fluentd
  type_name fluentd
</match>
